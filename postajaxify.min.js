/**
 * postajaxify v1.0.1
 * 
 * A jQuery plugin to AJAXify WordPress post queries with filters.
 * 
 * @version 1.0.1
 * @link https://github.com/vishalpadhariya/postajaxify
 * @license MIT
 * 
 * @param {string} ajaxurl The URL to use for AJAX calls.
 * @param {string} action The AJAX action to trigger.
 * @param {string} psottype The post type to filter.
 * @param {string} type The event type to trigger the AJAX call ('onChange' or 'onSubmit').
 * @param {object} callbacks Callback functions to trigger at different stages of the AJAX call.
 * @returns {object} The jQuery object for chaining.
 * 
 * @example
 * // Initialize the plugin on a form element with onChange event type and default callbacks only for beforeSend and afterSend events.
 * $('#filters-form').postajaxify(ajaxurl, 'filter_posts', 'post', 'onChange', {
 *    beforeSend: function () {
 *      console.log('Before sending AJAX request...');
 *   },
 *  afterSend: function () {
 *      console.log('After sending AJAX request...');
 *  },
 *  onSuccess: function (response) {
 *      console.log('AJAX request successful:', response);
 *  },
 *  onError: function (xhr, status, error) {
 *      console.error('AJAX request error:', error);
 *  }
 * });
 * 
 * @example
 * // Initialize the plugin on a form element with onSubmit event type and custom callbacks only for beforeSend and onSuccess events 
 * $('#filters-form').postajaxify(ajaxurl, 'filter_posts', 'post', 'onSubmit', {
 *    beforeSend: function () {
 *      console.log('Before sending AJAX request...');
 *   },
 *  afterSend: function () {
 *      console.log('After sending AJAX request...');
 *  },
 *  onSuccess: function (response) {
 *      console.log('AJAX request successful:', response);
 *  },
 *  onError: function (xhr, status, error) {
 *      console.error('AJAX request error:', error);
 *  }
 * });
 * 
 */ !function(t){t.fn.postajaxify=function(e,r,a,i,n){return this.each(function(){var o=t(this);if(!o.is("form")){console.error("postajaxify must be initialized on a form element.");return}var f={},u={},l={},d={};function c(){f={},u={},l={},d={},o.find("[data-taxfilter], [data-metafilter], [data-textfilter], [data-datefilter]").each(function(){var e,r=t(this);if(r.is(":checkbox, :radio")){if(!r.is(":checked"))return;e=r.val()}else e=r.is('input[type="text"], input[type="date"], input[type="datetime-local"]')?r.val().trim():r.val();if(e){if(r.attr("data-taxfilter")){var a=r.attr("data-taxfilter");f[a]||(f[a]=[]);var i=r.attr("multiple");void 0!==i?f[a].push(e):f[a]=e}if(r.attr("data-metafilter")){var n=r.attr("data-metafilter");u[n]||(u[n]=[]);var i=r.attr("multiple");void 0!==i?u[n].push(e):u[n]=e}if(r.attr("data-textfilter")&&(l[r.attr("data-textfilter")]=e),r.attr("data-datefilter")){var o=r.attr("data-datefilter"),c=e;d[o]||(d[o]=""),d[o]=c}}});var i={action:r,psottype:a,taxonomyFilters:f,metaFilters:u,textFilters:l,dateFilters:d};return n&&"function"==typeof n.beforeSend&&n.beforeSend(i),t.ajax({url:e,method:"POST",data:i,beforeSend:function(){n&&"function"==typeof n.beforeSend&&n.beforeSend()},complete:function(){n&&"function"==typeof n.afterSend&&n.afterSend()}}).then(function(t){return n&&"function"==typeof n.onSuccess&&n.onSuccess(t),console.log("Ajax response retrieved."),t},function(e,r,a){return n&&"function"==typeof n.onError&&n.onError(e,r,a),console.error("AJAX error:",a),t.Deferred().reject({status:r,error:a})})}"onChange"===i&&o.on("change","select, input[type=checkbox], input[type=radio], input[type=text], input[type=date], input[type=datetime-local]",function(){c().then(function(t){console.log("Filters successfully updated.")},function(t){console.error("Error updating filters:",t)})}),"onSubmit"===i&&o.on("submit",function(t){t.preventDefault(),c().then(function(t){console.log("Filters successfully updated.")},function(t){console.error("Error updating filters:",t)})})}),this}}(jQuery);